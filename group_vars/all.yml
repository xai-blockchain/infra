---
# =============================================================================
# XAI Global Variables
# =============================================================================
# Shared configuration for all XAI testnet nodes.
# Per-node overrides go in host_vars/<hostname>.yml

# =============================================================================
# Chain Configuration
# =============================================================================
chain_name: "XAI"
chain_id: "xai-mvp-testnet-1"
daemon_name: "xai"
daemon_user: "ubuntu"

# =============================================================================
# Python / Node Configuration
# =============================================================================
python_version: "3.12"
venv_path: "/home/{{ daemon_user }}/xai/venv"
xai_src: "/home/{{ daemon_user }}/xai"
xai_home: "/home/{{ daemon_user }}/xai"
xai_mvp_home: "/home/{{ daemon_user }}/xai-mvp"

# =============================================================================
# Network / Endpoints
# =============================================================================
artifacts_base_url: "https://artifacts.xaiblockchain.com"
public_rpc: "testnet-rpc.xaiblockchain.com"
public_api: "testnet-api.xaiblockchain.com"
public_ws: "testnet-ws.xaiblockchain.com"

# VPN network for private validator communication
vpn_network: "10.10.0.0/24"

# =============================================================================
# System Configuration
# =============================================================================
timezone: UTC
locale: en_US.UTF-8

# SSH hardening
ssh_port: 22
ssh_permit_root: "yes"
ssh_password_auth: "no"

# Firewall defaults
ufw_enabled: false  # Managed at server level
ufw_default_incoming: deny
ufw_default_outgoing: allow

# =============================================================================
# Common Packages
# =============================================================================
common_packages:
  - curl
  - wget
  - vim
  - htop
  - jq
  - git
  - make
  - build-essential
  - unzip
  - lz4
  - tmux
  - fail2ban
  - ufw
  - logrotate
  - ca-certificates
  - gnupg
  - apt-transport-https
  # Python-specific
  - python3
  - python3-pip
  - python3-venv
  - python3-dev
  - libffi-dev
  - libssl-dev

# =============================================================================
# XAI Port Assignments (12xxx range for nodes)
# =============================================================================
# Core Node Ports - Per-node overrides in inventory/testnet.yml
# Default base ports for development/single node:
default_rpc_port: 12545
default_p2p_port: 12333

# Sentry nodes (public-facing)
sentry1_rpc_port: 12570
sentry1_p2p_port: 12371
sentry2_rpc_port: 12571
sentry2_p2p_port: 12372

# =============================================================================
# Supporting Service Ports
# =============================================================================
# Blockscout Explorer (Docker - primary explorer)
blockscout_frontend_port: 3001
blockscout_backend_port: 4000
blockscout_postgres_port: 5432
rpc_adapter_port: 8545

# Legacy Python Explorer (backup/secondary)
legacy_explorer_port: 12080          # xai-explorer.service
legacy_explorer_backend_port: 12084  # xai-explorer-backend.service (indexer API)

# Other Services
faucet_port: 12081
websocket_port: 8766
websocket_metrics_port: 8767
graphql_port: 8083

# =============================================================================
# Monitoring Ports
# =============================================================================
node_exporter_port: 9100
node_exporter_version: "1.7.0"
xai_metrics_port: 9302
prometheus_port: 9090
grafana_port: 3000
prometheus_scrape_interval: 15s

# =============================================================================
# Nginx (for sentries)
# =============================================================================
nginx_worker_processes: auto
nginx_worker_connections: 4096

# =============================================================================
# Backup / Snapshot Settings
# =============================================================================
backup_retention_days: 7
snapshot_retention: 3
snapshot_dir: "/home/{{ daemon_user }}/xai-snapshots"

# =============================================================================
# XAI Environment Variables
# =============================================================================
# These are set in the systemd service
xai_env:
  XAI_CHAIN_ID: "{{ chain_id }}"
  XAI_FAST_MINING: "1"
  XAI_ALLOW_EMPTY_MINING: "true"
  XAI_FINALITY_ENABLED: "true"

# =============================================================================
# Maintenance
# =============================================================================
maintenance_reminder_day: 1
security_update_check: weekly
